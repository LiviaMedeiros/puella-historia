<div id="MemoriaComposeTop" class="<%= composeMode %>">
	<!-- 強化トップ -->
	<div id="mainWrap">
		<!-- 強化ベース -->
		<div id="targetCard" class="se_decide"></div>

		<!-- 強化ステータス -->
		<div id="statusWrap" class="commonFrame1">
			<h2 class="statusTitle"><% if(composeMode === "composeMode"){ %>メモリア強化<% }else{ %>メモリア限界突破<% } %></h2>
			<div id="beforeStatus">
			</div>
			<div id="statusArrow"></div>
			<div id="afterStatus">
			</div>
		</div>

		<!-- 選択済み素材一覧 -->
		<ul id="itemTab" class="common_tab t_gold">
			<li class="se_tabs TE current" data-type="memoria">メモリア</li>
			<li class="se_tabs TE" data-type="item">アイテム</li>
		</ul>
		<div class="useItemWrap commonFrame1 current" data-type="memoria">
			<div class="useItemText c_gold">タッチして素材メモリアを選んでください</div>
			<ul id="useItem" class="se_decide">
				<li></li>
				<li></li>
				<li></li>
				<li class="lb_br"></li>
				<li></li>
				<li class="no_lb"></li>
				<li class="no_lb"></li>
				<li class="no_lb"></li>
				<li class="no_lb"></li>
				<li class="no_lb"></li>
			</ul>
		</div>
		<div class="useItemWrap commonFrame1" data-type="item">
			<div class="useItemText c_gold">アイテム素材を使用して強化します</div>
			<div id="useItem2" class=""></div>
		</div>

		<!-- 決定ボタン -->
		<span id="runBtn" class="se_decide"></span>
	</div>
	<!-- 強化トップここまで -->

	<!-- 素材選択画面 -->
	<div id="cardListWrap">
		<!-- ヘッダー部 -->
		<div id="memoriaListHeader">
			<!-- 所持数 -->
			<ul id="memoriaListInfo" class="memoriaInfo">
				<li class="listIcon"></li>
				<li class="cardCount_2"><span id="info_memoriaCount">80</span>/<span id="info_memoriaCapacity"><%= gameUser.cardCapacity %></span></li>
				<li class="cardCount_3"><span id="info_selectCount">0</span></li>
			</ul>

			<!-- 各種ファンクション -->
			<span id="useMaterialResetBtn" class="btn TE b_white"><span class='b_screen'></span>選択全解除</span>
			<span id="selectCommonBtn" class="btn TE b_white"><span class='b_screen'></span>★1・★2<br>まとめて選択</span>
			<ul id="sortPanel">
				<li id="sortPopupMemoria" class='se_decide sb_gold_02 TE'><span class='b_screen'></span>フィルタ<span id="filterTypes"></span></li>
				<li id="sortBtn" class='se_decide sb_gold_02 TE'><span class='b_screen'></span>ソート順</li>
			</ul>
			<ul id="ascPanelMemoria">
				<li id="ascMemoria" class="se_decide se_tabs TE" data-ascId="desc"></li>
				<li id="descMemoria" class="se_decide se_tabs TE" data-ascId="asc" class="none"></li>
			</ul>
		</div>

		<!-- 一覧部分 -->
		<div id="cardWrapFrame" class="commonFrame2">
			<div class="memoriaScrollWrap" id="scrollMain">
				<div id="cardWrap" class="scrollInner"></div>
			</div>
		</div>

		<!-- サイズ変更ボタン -->
		<div id="sizeChange" class="se_tabs TE" data-size="smaller"><span class="b_screen"></span></div>

		<!-- 情報表示部分 -->
		<div id="needRiche" class="rightColumn">
			<span class="countTitle pointFrame">必要なCC</span>
			<span id="info_needRiche" class="riche columnNum">0</span>
		</div>
		<div id="hasRiche" class="rightColumn">
			<span class="countTitle pointFrame">所持CC</span>
			<span id="info_hasRiche" class="riche columnNum"><%= gameUser.riche %></span>
		</div>
		<div id="materialCostBgWrap" class="commonFrame3"></div>
		<div id="getExp" class="rightColumn commonFrame3">
			<span class="getExpTitle pointFrame">獲得できるEXP</span>
			<span id="info_getExp" class="riche columnNum">0</span>
		</div>

		<!-- 情報表示部分：限界突破時 -->
		<div id="getLimitBreak" class="rightColumn commonFrame3">
			<div class="lvUpIcon"></div>
			<span class="getExpTitle pointFrame">限界突破回数</span>
			<ul id="miniLbWrap">
				<li class="statuslb1"></li>
				<li class="statuslb2"></li>
				<li class="statuslb3"></li>
				<li class="statuslb4"></li>
			</ul>
			<div id="limitBreakLvWrap" class="c_gold">Lv<span id="limitAfterLv" class="c_purple"></span>/<span id="limitAfterMaxLv" class="c_purple"></span></div>
		</div>

		<!-- 情報表示部分：強化時 -->
		<div id="needExp" class="rightColumn c_gold">
			<div class="lvUpIcon"></div>
			NEXT <span id="info_needExp" class="riche columnNum">0</span>
		</div>

		<!-- 所持アイテム -->
		<div id="itemWrap" class="rightColumn c_gold"></div>


		<!-- 決定ボタン -->
		<span id="materialDecideBtn" class="btn TE se_decide b_pink" data-wrap-id="cardListWrap"><span class='b_screen'></span>決定</span>
	</div>
	<!-- 素材選択画面ここまで -->
</div>

<!-- 強化アイテムtemplate -->
<script type="text/template" id="composeItemParts">
	<img class="itemImg" src="/magica/resource/image_web/page/memoria/item/<%='<%= itemId.toLowerCase() %\>'%>.png" />
	<div class="minusBtn TE se_decide off" data-type="minus"><span class="b_screen"></span></div>
	<div class="plusBtn TE se_decide off" data-type="plus"><span class="b_screen"></span></div>
	<div class="amountNums">
		<span class="selectNum">0</span>/<span class="maxNum"><%='<%= quantity %\>'%></span>
	</div>
	<div class="btn sb_gold_02 se_decide TE maxBtn off" data-type="max"><span class="b_screen"></span>MAX</div>
</script>

<!-- 強化対象選択カードリストtemplate -->
<script type="text/template" id="CardListParts">
	<div class="cardInner">
		<div class="overWrap"></div>
		<span class="dispPrm"></span>
		<span class="lv"><span class="lvNum">Lv<%="<%=model.level%\></span>/<%=model.maxLevel%\>"%></span>
		<span class="limitBreak lbCount<%='<%=model.lbCount%\>'%>">
			<span class="lb1"></span>
			<span class="lb2"></span>
			<span class="lb3"></span>
			<span class="lb4"></span>
		</span>
		<span class="lock"></span>
		<div class="eventEffect"></div>
		<span class="equip"></span>
		<img src='/magica/resource/image_web/memoria/memoria_<%="<%= model.pieceId %\>"%>_s.png' alt=''>
		<div class="paramWrap" data-level="<%='<%=model.level%\>'%>" data-piece-id="<%='<%=model.pieceId%\>'%>" data-hp="<%='<%=model.hp%\>'%>" data-atk="<%='<%=model.attack%\>'%>" data-def="<%='<%=model.defense%\>'%>" data-rank="<%='<%=model.piece.rank%\>'%>" data-created="<%='<%=model.createdAt%\>'%>" data-lb="<%='<%=model.lbCount%\>'%>"></div>
	</div>

</script>


<!-- ステータスtemplate -->
<script type="text/template" id="StatusParts">
	<p class="lvWrap"><%="<span class='lv'\><%= model.level %\></span\><span class='sla'>/</span><span class='maxLv'\><%= model.maxLevel %\>"%></span></p>
	<p class="expWrap"><%="<span class='exp'\></span\>"%></p>
	<ul class="lbCount_3<%="<% if(model.lbCount < 4){ %\> thisLb<%= model.lbCount %\><% }else if(model.lbCount > 3){ %\> thisLb4 <% } %\>"%>">
		<li class="statuslb1"></li>
		<li class="statuslb2"></li>
		<li class="statuslb3"></li>
		<li class="statuslb4"></li>
	</ul>
	<p class="nextLvWrap"><span class="c_gold">NEXT</span>&nbsp;<%="<span class='nextExp'\></span\>"%></p>
	<p class="HP"><span class="statusTitle">HP</span><span class="statusHP">12345</span></p>
	<p class="ATK"><span class="statusTitle">ATK</span><span class="statusATK">12345</span></p>
	<p class="DEF"><span class="statusTitle">DEF</span><span class="statusDEF">12345</span></p>
	<p class="skill"></p>

	<%="<% if(model.piece.pieceSkill){ %\>"%>
	<img class="skillImage" data-nativeimgkey='icon_skill_<%="<%= model.piece.pieceSkill.groupId %\>"%>' data-src='resource/image_native/art/icon_skill_<%="<%= model.piece.pieceSkill.groupId %\>"%>.png'>
	<%="<%  } %\>"%>
	<div class="statusLvupIcon"></div>
</script>


<!-- 強化確認template -->
<script type="text/template" id="ComposeDecidePopup">
	<div class="popupInner">
		<span class="closeDefault se_cancel popupCloseBtn TE"></span>
		<p id="popupInfoDetailTitle" class="popupTitle">メモリア<%="<%= text %\>"%></p>

		<div class="popupTextArea">
			メモリアを<%="<%= text %\>"%>します。よろしいですか？<br>
			<%='<% if(rarityAlert){ %\>'%><span class="c_red">★3以上のメモリアが含まれています。</span><%='<% } %\>'%>
			<%="<% if (!isItem) { %\>"%>
			<ul id="memoriaPopCardArray">
				<%="<% var max = mode==='compose' ? 10 : 4; %\>"%>
				<%='<% for(var i=0;i<max;i++){ %\>'%>
				<%='<% var set = (dispArr[i]) ? true : false; %\>'%>
				<li><%='<% if(set){ %\>'%><img src='/magica/resource/image_web/memoria/memoria_<%="<%= dispArr[i].pieceId %\>"%>_s.png' alt=''><%='<% } %\>'%></li>
				<%='<% } %\>'%>
			</ul>
			<%="<% } else { %\>"%>
			<div id="memoriaPopItemArray">
				<%="<% _.each(dispArr,function(value){ %\>"%>
					<div class='useItem'>
						<p class="selectNum"><%="<%= value.num %\>"%></p>
						<img src='/magica/resource/image_web/item/main/<%="<%= value.itemId.toLowerCase() %\>"%>.png' alt=''>
					</div>
				<%="<% }) %\>"%>
			</div>
			<%="<% } %\>"%>
		</div>

		<table class="popupBtnArea" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td><span class="cancelBtn se_cancel popupCloseBtn btn TE b_white"><span class='b_screen'></span>キャンセル</span></td>
				<td><span id="composeRunDecideBtn" class="decideBtn se_kettei02 popupCloseBtn btn TE b_pink"><span class='b_screen'></span><%="<%= text %\>"%></span></td>
			</tr>
		</table>
	</div>
</script>

<!-- 装備中警告template -->
<script type="text/template" id="formationEquipCautionPop">
	<div class="popupInner">
		<span class="closeDefault se_cancel popupCloseBtn TE"></span>
		<p id="popupInfoDetailTitle" class="popupTitle common_title">装備中のメモリア</p>

		<div class="popupTextArea">
			装備中のメモリアは素材メモリアとして使用できません。<br>
			全ての編成から装備をはずしますか？

			<dl class='common_dl'>
				<dt>装備中の編成</dt>
				<dd>
					<%='<% if(model.equipDeck.indexOf("quest") !== -1) { %\>'%>
						<span class="c_purple">クエスト編成</span>
					<%='<% } %\>'%>
					<%='<% if(model.equipDeck.indexOf("support") !== -1) { %\>'%>
						<span class="c_purple">サポート編成</span>
					<%='<% } %\>'%>
					<%='<% if(model.equipDeck.indexOf("arena") !== -1) { %\>'%>
						<span class="c_purple">ミラーズ編成</span>
					<%='<% } %\>'%>
					<%='<% if(model.equipDeck.indexOf("pieceSet") !== -1) { %\>'%>
						<span class="c_purple">メモリアセット</span>
					<%='<% } %\>'%>
					<%='<% if(model.equipDeck.indexOf("event") !== -1) { %\>'%>
						<span class="c_purple">イベント編成</span>
					<%='<% } %\>'%>
				</dd>
			</dl>
		</div>
		<table class="popupBtnArea" width="400" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td><span class="cancelBtn se_cancel popupCloseBtn btn b_white TE"><span class='b_screen'></span>キャンセル</span></td>
				<td><span class="decideBtn se_cancel btn b_pink TE"><span class='b_screen'></span>OK</span></td>
			</tr>
		</table>
	</div>
</script>

<!-- 装備中警告template -->
<script type="text/template" id="formationEquipCautionPop2">
	<div class="popupInner">
		<span class="closeDefault se_cancel popupCloseBtn TE"></span>
		<p id="popupInfoDetailTitle" class="popupTitle common_title">装備中のメモリア</p>

		<div class="popupTextArea">
			全ての編成から装備をはずします。<br>
			よろしいですか？
		</div>
		<table class="popupBtnArea" width="400" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td><span class="decideBtn se_cancel btn b_pink TE"><span class='b_screen'></span>はずす</span></td>
				<td><span class="cancelBtn se_cancel popupCloseBtn btn b_white TE"><span class='b_screen'></span>キャンセル</span></td>
			</tr>
		</table>
	</div>
</script>

<!-- 確認時表示template -->
<script type="text/template" id="glowTemplate">
	<div id="costRiche">
		<span class="countTitle pointFrame">必要なCC</span>
		<span class="riche">0</span>
	</div>
	<div id="hasRicheTop">
		<span class="countTitle pointFrame">所持CC</span>
		<span id="info_hasRicheTop"><%='<%= gameUser.riche %\>'%></span>
	</div>
	<div id="costBgWrap" class="commonFrame3"></div>
</script>
